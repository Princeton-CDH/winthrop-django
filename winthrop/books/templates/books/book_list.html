{% extends "base.html" %}
{% load static humanize %}

{% block page-subtitle %}Books | {% endblock %}

{% block page-context-id %}book-list{% endblock %}

{% block page_header %}
<header id="header" class="ui inverted center aligned basic segment">
	<h1 class="ui header">Books</h1>
</header>
{% endblock %}

{% block content %}
<div class="ui container">
	<div class="ui center aligned text container">
		{% if paginator.count %}
			<h4 class="results-count ui header">Displaying {{ paginator.count|intcomma }} book{{ paginator.count|pluralize }}</h4>
		{% endif %}
	</div>
	<div class="search-form ui segment">
		<form>
		{{ search_form.as_p }}
		<input type="submit"/>
		</form>
	</div>
	{% if paginator.count %}
	<div class="ui two column stackable grid">
		{% for book in object_list %}
			<div class="six wide column">
				<div class="ui segment">
					<a href="{% url 'books:detail' book.slug %}">
					{% if book.thumbnail %}
					<img class="ui right floated image" src="{% iiif_image book.thumbnail height=218 %}"
							srcset="{% iiif_image book.thumbnail height=436 %} 2x"
							alt="{{ book.thumbnail_label }}" title="{{ book.thumbnail_label }}"/>
					{% endif %}
					<b>{{ book.short_title }}</b>
					{% for author in book.authors %}
							<p>{{ author }}</p>
					{% endfor %}
					<p>{{ book.pub_year }}</p>
					{% if book.is_annotated %}
						<div class="ui label">annotated</div>
					{% endif %}
				 </div>
			 </a>
			</div>
		{% endfor %}
	</div>
	{% else %}
	<div class="ui error message">
			<p>{% firstof error "No results found" %}</p>
	</div>
	{% endif %}
	{% include 'snippets/pagination.html' %}
</div>
{% endblock %}